"<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap');

    body {
      font-family: 'Sarabun', sans-serif;
      background: linear-gradient(135deg, #5a4e7c, #3a2a52);
      color: #f0f0f0;
      padding: 30px;
      max-width: 480px;
      margin: 40px auto;
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(58, 42, 82, 0.8);
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      font-weight: 700;
      color: #ffd860;
      text-shadow: 0 0 15px #ffd860aa;
    }

    label {
      display: block;
      margin-top: 20px;
      font-weight: 600;
      color: #e6e6e6;
    }

    input, select, button {
      width: 100%;
      padding: 14px 18px;
      margin-top: 8px;
      border-radius: 12px;
      border: none;
      font-size: 17px;
      box-sizing: border-box;
      outline: none;
      transition: box-shadow 0.3s ease, background 0.3s ease;
      background: rgba(255 255 255 / 0.15);
      color: #fff;
      font-weight: 600;
    }

    input::placeholder {
      color: #ddd;
    }

    input:focus, select:focus {
      box-shadow: 0 0 12px 3px #ffd860cc;
      background: rgba(255 255 255 / 0.3);
    }

    button {
      background: linear-gradient(90deg, #ffb347, #ffd860);
      color: #3a2a52;
      font-weight: 700;
      margin-top: 24px;
      cursor: pointer;
      box-shadow: 0 6px 16px #ffd860cc;
    }

    button:hover {
      background: linear-gradient(90deg, #ffd860, #ffb347);
    }

    button:active {
      transform: scale(0.96);
    }

    .output {
      background: rgba(255 255 255 / 0.15);
      padding: 22px 24px;
      border-radius: 18px;
      margin-top: 32px;
      box-shadow: inset 0 0 14px rgba(255 255 255 / 0.2);
    }

    .output p {
      margin: 10px 0;
      font-size: 19px;
      font-weight: 600;
    }

    #score, #calculatedScore2 {
      font-size: 26px;
      font-weight: 800;
      color: #ffd860;
      text-shadow: 0 0 10px #ffd860aa;
    }

    #status {
      font-style: italic;
      color: #ffeaa7cc;
    }

    #elapsed, #totalUsedTime, #timeRemaining, #nowTime2, #chosenTime2 {
      font-weight: 700;
    }

    .time-row {
      display: flex;
      gap: 14px;
    }

    .time-row input {
      flex: 1;
    }

    .time-row select {
      flex: 1;
    }

    hr {
      border-color: rgba(255 255 255 / 0.2);
      margin: 60px 0;
    }

    #calculator2 {
      background: rgba(255 255 255 / 0.1);
      padding: 34px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(255 216 96 / 0.3);
    }

    /* Language selector */
    #langSelect {
      width: 120px;
      font-size: 18px;
      font-weight: 700;
      padding: 8px 12px;
      margin-bottom: 20px;
      cursor: pointer;
      border-radius: 12px;
      border: none;
      background: rgba(255 255 255 / 0.15);
      color: #fff;
      outline: none;
      transition: box-shadow 0.3s ease, background 0.3s ease;
    }
    #langSelect:hover {
      background: rgba(255 255 255 / 0.3);
      box-shadow: 0 0 12px 3px #ffd860cc;
    }
  </style>
</head>
<body>

  <select id="langSelect" title="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏≤ / Select Language">
    <option value="th">üáπüá≠ ‡πÑ‡∏ó‡∏¢</option>
    <option value="en">üá∫üá∏ English</option>
  </select>

  <h1 id="title">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h1>

  <label id="labelPoints">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Points)</label>
  <input type="number" id="points" min="0" placeholder="‡πÉ‡∏™‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤" />

  <label id="labelTimeAmount">‡∏ó‡∏∏‡∏Å‡πÜ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô) ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤</label>
  <div class="time-row">
    <input type="number" id="timeAmount" min="1" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô 1" />
    <select id="timeUnit">
      <option value="seconds">‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
      <option value="minutes" selected>‡∏ô‡∏≤‡∏ó‡∏µ</option>
      <option value="hours">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</option>
      <option value="days">‡∏ß‡∏±‡∏ô</option>
    </select>
  </div>

  <label id="labelTargetScore">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
  <input type="number" id="targetScore" placeholder="‡πÉ‡∏™‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" />

  <div style="display:flex; gap:14px; margin-top:24px;">
    <button id="btnStart">‡πÄ‡∏£‡∏¥‡πà‡∏°</button>
    <button id="btnPause">‡∏û‡∏±‡∏Å</button>
    <button id="btnReset">‡∏£‡∏µ‡πÄ‡∏ã‡∏ï</button>
  </div>

  <div class="output">
    <p><span id="labelStatusText">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</span> <span id="status">‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°...</span></p>
    <p><span id="labelScoreText">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô:</span> <span id="score">0</span></p>
    <p><span id="labelElapsedText">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ:</span> <span id="elapsed">-</span></p>
    <p><span id="labelTotalUsedTimeText">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span> <span id="totalUsedTime">-</span></p>
    <p><span id="labelTimeRemainingText">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</span> <span id="timeRemaining">-</span></p>
  </div>

  <hr />

  <div id="calculator2">
    <h1 id="title2">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</h1>

    <label id="labelPoints2">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</label>
    <input type="number" id="points2" min="0" placeholder="‡πÉ‡∏™‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤" />

    <label id="labelTimeAmount2">‡∏ó‡∏∏‡∏Å‡πÜ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô) ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤</label>
    <div class="time-row">
      <input type="number" id="timeAmount2" min="1" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô 1" />
      <select id="timeUnit2">
        <option value="seconds">‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
        <option value="minutes" selected>‡∏ô‡∏≤‡∏ó‡∏µ</option>
        <option value="hours">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</option>
        <option value="days">‡∏ß‡∏±‡∏ô</option>
      </select>
    </div>

    <label id="labelEndTime2">‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢)</label>
    <input type="datetime-local" id="endTime2" />

    <button id="btnCalcScore">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>

    <div class="output">
      <p><span id="labelNowTime2Text">‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</span> <span id="nowTime2">-</span></p>
      <p><span id="labelChosenTime2Text">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</span> <span id="chosenTime2">-</span></p>
      <p><span id="labelCalculatedScore2Text">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô:</span> <span id="calculatedScore2">-</span></p>
    </div>
  </div>

<script>
  // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏õ‡∏•
  const texts = {
    th: {
      title: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô",
      labelPoints: "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Points)",
      labelTimeAmount: "‡∏ó‡∏∏‡∏Å‡πÜ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô) ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤",
      labelTargetScore: "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)",
      btnStart: "‡πÄ‡∏£‡∏¥‡πà‡∏°",
      btnPause: "‡∏û‡∏±‡∏Å",
      btnReset: "‡∏£‡∏µ‡πÄ‡∏ã‡∏ï",
      statusWaiting: "‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°...",
      labelStatusText: "‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:",
      labelScoreText: "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô:",
      labelElapsedText: "‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ:",
      labelTotalUsedTimeText: "‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:",
      labelTimeRemainingText: "‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠:",
      timeUnitsFull: {
        seconds: "‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ",
        minutes: "‡∏ô‡∏≤‡∏ó‡∏µ",
        hours: "‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á",
        days: "‡∏ß‡∏±‡∏ô"
      },
      placeholderPoints: "‡πÉ‡∏™‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤",
      placeholderTimeAmount: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô 1",
      placeholderTargetScore: "‡πÉ‡∏™‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)",

      title2: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤",
      labelPoints2: "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô",
      labelTimeAmount2: "‡∏ó‡∏∏‡∏Å‡πÜ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô) ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤",
      labelEndTime2: "‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢)",
      btnCalcScore: "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô",
      labelNowTime2Text: "‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:",
      labelChosenTime2Text: "‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:",
      labelCalculatedScore2Text: "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô:",
      labelDurationText2Text: "‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤:",
      placeholderPoints2: "‡πÉ‡∏™‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤",
      placeholderTimeAmount2: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô 1"
    },
    en: {
      title: "Score & Time Calculator",
      labelPoints: "Points",
      labelTimeAmount: "Every (amount) time unit",
      labelTargetScore: "Target score (optional)",
      btnStart: "Start",
      btnPause: "Pause",
      btnReset: "Reset",
      statusWaiting: "Waiting to start...",
      labelStatusText: "Status:",
      labelScoreText: "Score:",
      labelElapsedText: "Elapsed time:",
      labelTotalUsedTimeText: "Total used time:",
      labelTimeRemainingText: "Time remaining:",
      timeUnitsFull: {
        seconds: "Seconds",
        minutes: "Minutes",
        hours: "Hours",
        days: "Days"
      },
      placeholderPoints: "Enter points earned per time unit",
      placeholderTimeAmount: "Amount of time units, e.g. 1",
      placeholderTargetScore: "Enter target score (optional)",

      title2: "Score Calculator from Time",
      labelPoints2: "Points",
      labelTimeAmount2: "Every (amount) time unit",
      labelEndTime2: "End time (target time)",
      btnCalcScore: "Calculate Score",
      labelNowTime2Text: "Current time:",
      labelChosenTime2Text: "Chosen time:",
      labelCalculatedScore2Text: "Score:",
      labelDurationText2Text: "Duration:",
      placeholderPoints2: "Enter points earned per time unit",
      placeholderTimeAmount2: "Amount of time units, e.g. 1"
    }
  };

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
  function detectBrowserLanguage() {
    const lang = navigator.language || navigator.userLanguage || "en";
    if (lang.toLowerCase().startsWith("th")) {
      return "th";
    } else if (lang.toLowerCase().startsWith("en")) {
      return "en";
    } else {
      return "en"; // ‡∏î‡∏µ‡∏ü‡∏≠‡∏•‡∏ï‡πå
    }
  }

  // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡πÅ‡∏õ‡∏•‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  function setLanguage(lang) {
    document.documentElement.lang = lang;
    document.getElementById("langSelect").value = lang;

    const t = texts[lang];

    document.getElementById("title").textContent = t.title;
    document.getElementById("labelPoints").textContent = t.labelPoints;
    document.getElementById("labelTimeAmount").textContent = t.labelTimeAmount;
    document.getElementById("labelTargetScore").textContent = t.labelTargetScore;
    document.getElementById("btnStart").textContent = t.btnStart;
    document.getElementById("btnPause").textContent = t.btnPause;
    document.getElementById("btnReset").textContent = t.btnReset;
    document.getElementById("status").textContent = t.statusWaiting;
    document.getElementById("labelStatusText").textContent = t.labelStatusText;
    document.getElementById("labelScoreText").textContent = t.labelScoreText;
    document.getElementById("labelElapsedText").textContent = t.labelElapsedText;
    document.getElementById("labelTotalUsedTimeText").textContent = t.labelTotalUsedTimeText;
    document.getElementById("labelTimeRemainingText").textContent = t.labelTimeRemainingText;

    // ‡πÅ‡∏õ‡∏• select options ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤
    const timeUnitSelect = document.getElementById("timeUnit");
    for (let opt of timeUnitSelect.options) {
      opt.textContent = t.timeUnitsFull[opt.value];
    }

    // ‡πÅ‡∏õ‡∏•‡∏™‡πà‡∏ß‡∏ô calculator2
    document.getElementById("title2").textContent = t.title2;
    document.getElementById("labelPoints2").textContent = t.labelPoints2;
    document.getElementById("labelTimeAmount2").textContent = t.labelTimeAmount2;
    document.getElementById("labelEndTime2").textContent = t.labelEndTime2;
    document.getElementById("btnCalcScore").textContent = t.btnCalcScore;
    document.getElementById("labelNowTime2Text").textContent = t.labelNowTime2Text;
    document.getElementById("labelChosenTime2Text").textContent = t.labelChosenTime2Text;
    document.getElementById("labelCalculatedScore2Text").textContent = t.labelCalculatedScore2Text;

    const timeUnitSelect2 = document.getElementById("timeUnit2");
    for (let opt of timeUnitSelect2.options) {
      opt.textContent = t.timeUnitsFull[opt.value];
    }

    // placeholder
    document.getElementById("points").placeholder = t.placeholderPoints;
    document.getElementById("timeAmount").placeholder = t.placeholderTimeAmount;
    document.getElementById("targetScore").placeholder = t.placeholderTargetScore;
    document.getElementById("points2").placeholder = t.placeholderPoints2;
    document.getElementById("timeAmount2").placeholder = t.placeholderTimeAmount2;
  }

  // ‡πÅ‡∏õ‡∏•‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
  function convertToSeconds(amount, unit) {
    amount = Number(amount);
    if (isNaN(amount) || amount <= 0) return null;
    switch (unit) {
      case "seconds": return amount;
      case "minutes": return amount * 60;
      case "hours": return amount * 3600;
      case "days": return amount * 86400;
      default: return null;
    }
  }

  // ‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏µ ‡∏ß‡∏±‡∏ô ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
  function formatTime(seconds) {
    if (seconds < 0) seconds = 0;
    let remaining = seconds;
    const years = Math.floor(remaining / (365*86400));
    remaining %= 365*86400;
    const days = Math.floor(remaining / 86400);
    remaining %= 86400;
    const hours = Math.floor(remaining / 3600);
    remaining %= 3600;
    const minutes = Math.floor(remaining / 60);
    remaining %= 60;
    return { years, days, hours, minutes, seconds: remaining };
  }

  function formatTimeString(t) {
    let parts = [];
    if(t.years) parts.push(`${t.years} ‡∏õ‡∏µ`);
    if(t.days) parts.push(`${t.days} ‡∏ß‡∏±‡∏ô`);
    if(t.hours) parts.push(`${t.hours} ‡∏ä‡∏°.`);
    if(t.minutes) parts.push(`${t.minutes} ‡∏ô‡∏≤‡∏ó‡∏µ`);
    if(t.seconds || parts.length===0) parts.push(`${t.seconds} ‡∏ß‡∏¥`);
    return parts.join(' ');
  }

  // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
  let timerInterval = null;
  let startTime = null;
  let elapsedTime = 0;
  let paused = false;
  let currentScore = 0;

  // ‡πÅ‡∏õ‡∏•‡∏á‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡πÑ‡∏ó‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á)
  function langSwitchText(lang, enText, thText) {
    return lang === "th" ? thText : enText;
  }

  function resetAll() {
    elapsedTime = 0;
    paused = false;
    currentScore = 0;
    startTime = null;
    document.getElementById("score").textContent = "0";
    document.getElementById("elapsed").textContent = "-";
    document.getElementById("totalUsedTime").textContent = "-";
    document.getElementById("timeRemaining").textContent = "-";
    document.getElementById("status").textContent = texts[currentLang].statusWaiting;
    clearInterval(timerInterval);
    timerInterval = null;
  }

  // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ï‡∏£‡∏¥‡∏á‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÅ‡∏•‡∏∞‡πÑ‡∏ó‡∏¢ (‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô)
  function getTimeStringObj(seconds, lang) {
    let t = formatTime(seconds);
    if (lang === "en") {
      let parts = [];
      if(t.years) parts.push(`${t.years} year${t.years>1?'s':''}`);
      if(t.days) parts.push(`${t.days} day${t.days>1?'s':''}`);
      if(t.hours) parts.push(`${t.hours} hour${t.hours>1?'s':''}`);
      if(t.minutes) parts.push(`${t.minutes} minute${t.minutes>1?'s':''}`);
      if(t.seconds || parts.length===0) parts.push(`${t.seconds} second${t.seconds!==1?'s':''}`);
      return parts.join(' ');
    } else {
      return formatTimeString(t);
    }
  }

  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
  function updateDisplay() {
    const t = texts[currentLang];
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ
    if (!startTime) return;
    if (!paused) elapsedTime = Math.floor((Date.now() - startTime) / 1000);

    // ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ä‡πâ‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    const pointsPerInterval = Number(document.getElementById("points").value);
    const timeAmount = Number(document.getElementById("timeAmount").value);
    const timeUnit = document.getElementById("timeUnit").value;
    const targetScoreRaw = document.getElementById("targetScore").value;
    const targetScore = targetScoreRaw ? Number(targetScoreRaw) : null;

    if (!pointsPerInterval || !timeAmount) {
      document.getElementById("status").textContent = t.statusWaiting;
      return;
    }
    const timeUnitSeconds = convertToSeconds(timeAmount, timeUnit);
    if (!timeUnitSeconds) {
      document.getElementById("status").textContent = t.statusWaiting;
      return;
    }

    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ
    let score = Math.floor(elapsedTime / timeUnitSeconds) * pointsPerInterval;
    if (score < 0) score = 0;

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
    currentScore = score;
    document.getElementById("score").textContent = score;

    // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏µ ‡∏ß‡∏±‡∏ô ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏ß‡∏¥
    document.getElementById("elapsed").textContent = getTimeStringObj(elapsedTime, currentLang);

    // ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î = ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ / ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢ * ‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢
    let totalUsedSeconds;
    if (targetScore) {
      totalUsedSeconds = Math.ceil(targetScore / pointsPerInterval) * timeUnitSeconds;
      document.getElementById("totalUsedTime").textContent = getTimeStringObj(totalUsedSeconds, currentLang);
      // ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
      let remaining = totalUsedSeconds - elapsedTime;
      if (remaining < 0) remaining = 0;
      document.getElementById("timeRemaining").textContent = getTimeStringObj(remaining, currentLang);
    } else {
      document.getElementById("totalUsedTime").textContent = "-";
      document.getElementById("timeRemaining").textContent = "-";
    }

    // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
    if (targetScore && score >= targetScore) {
      document.getElementById("status").textContent = langSwitchText(currentLang, "Target reached!", "‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
      clearInterval(timerInterval);
      timerInterval = null;
    } else {
      document.getElementById("status").textContent = langSwitchText(currentLang, "Running...", "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô...");
    }
  }

  // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
  function startTimer() {
    if (timerInterval) return; // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ã‡πâ‡∏≥
    if (!startTime) {
      startTime = Date.now() - elapsedTime * 1000;
    }
    paused = false;
    timerInterval = setInterval(updateDisplay, 1000);
  }

  // ‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ (‡∏û‡∏±‡∏Å)
  function pauseTimer() {
    if (timerInterval) {
      clearInterval(timerInterval);
      timerInterval = null;
      paused = true;
      document.getElementById("status").textContent = langSwitchText(currentLang, "Paused", "‡∏û‡∏±‡∏Å‡∏≠‡∏¢‡∏π‡πà");
    }
  }

  // ‡∏£‡∏µ‡πÄ‡∏ã‡∏ï‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
  function resetTimer() {
    const confirmMsg = currentLang === "th" ? "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡∏´‡∏°‡∏î!" : "Are you sure you want to reset? All data will be lost!";
    if (confirm(confirmMsg)) {
      resetAll();
    }
  }

  // -------- Calculator 2 ---------
  function calculateScore2() {
    const points2 = Number(document.getElementById("points2").value);
    const timeAmount2 = Number(document.getElementById("timeAmount2").value);
    const timeUnit2 = document.getElementById("timeUnit2").value;
    const endTime2Str = document.getElementById("endTime2").value;

    if (!points2 || !timeAmount2 || !endTime2Str) {
      alert(currentLang === "th" ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ" : "Please fill all fields in this section");
      return;
    }

    const endTime2 = new Date(endTime2Str);
    if (isNaN(endTime2.getTime())) {
      alert(currentLang === "th" ? "‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" : "Invalid time");
      return;
    }

    const now = new Date();
    if (endTime2 <= now) {
      alert(currentLang === "th" ? "‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô" : "End time must be after current time");
      return;
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
    document.getElementById("nowTime2").textContent = now.toLocaleString(currentLang === "th" ? "th-TH" : "en-US");
    document.getElementById("chosenTime2").textContent = endTime2.toLocaleString(currentLang === "th" ? "th-TH" : "en-US");

    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
    const durationSeconds = Math.floor((endTime2.getTime() - now.getTime()) / 1000);

    // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    const timeUnitSeconds2 = convertToSeconds(timeAmount2, timeUnit2);
    if (!timeUnitSeconds2) {
      alert(currentLang === "th" ? "‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" : "Invalid time unit or amount");
      return;
    }

    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤
    const score2 = Math.floor(durationSeconds / timeUnitSeconds2) * points2;

    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
    document.getElementById("calculatedScore2").textContent = score2;

  }

  // ----- Language & event listeners -----
  let currentLang = "th";

  window.addEventListener("DOMContentLoaded", () => {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå
    currentLang = detectBrowserLanguage();
    setLanguage(currentLang);

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ event
    document.getElementById("btnStart").addEventListener("click", () => {
      startTimer();
    });

    document.getElementById("btnPause").addEventListener("click", () => {
      pauseTimer();
    });

    document.getElementById("btnReset").addEventListener("click", () => {
      resetTimer();
    });

    document.getElementById("langSelect").addEventListener("change", (e) => {
      currentLang = e.target.value;
      setLanguage(currentLang);
      resetAll();
    });

    document.getElementById("btnCalcScore").addEventListener("click", () => {
      calculateScore2();
    });
  });
</script>
</body>
</html>"
