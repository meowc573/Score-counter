<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap');

    body {
      font-family: 'Sarabun', sans-serif;
      background: linear-gradient(135deg, #5a4e7c, #3a2a52);
      color: #f0f0f0;
      padding: 30px;
      max-width: 480px;
      margin: 40px auto;
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(58, 42, 82, 0.8);
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      font-weight: 700;
      color: #ffd860;
      text-shadow: 0 0 15px #ffd860aa;
    }

    label {
      display: block;
      margin-top: 20px;
      font-weight: 600;
      color: #e6e6e6;
    }

    input, select, button {
      width: 100%;
      padding: 14px 18px;
      margin-top: 8px;
      border-radius: 12px;
      border: none;
      font-size: 17px;
      box-sizing: border-box;
      outline: none;
      transition: box-shadow 0.3s ease, background 0.3s ease;
    }

    input, select {
      background: rgba(255 255 255 / 0.15);
      color: #fff;
      font-weight: 600;
    }

    input::placeholder {
      color: #ddd;
    }

    input:focus, select:focus {
      box-shadow: 0 0 12px 3px #ffd860cc;
      background: rgba(255 255 255 / 0.3);
    }

    button {
      background: linear-gradient(90deg, #ffb347, #ffd860);
      color: #3a2a52;
      font-weight: 700;
      margin-top: 24px;
      cursor: pointer;
      box-shadow: 0 6px 16px #ffd860cc;
    }

    button:hover {
      background: linear-gradient(90deg, #ffd860, #ffb347);
    }

    button:active {
      transform: scale(0.96);
    }

    .output {
      background: linear-gradient(135deg, #2b2f4a, #3e4666);
      padding: 22px 24px;
      border-radius: 18px;
      margin-top: 32px;
      box-shadow: inset 0 0 12px #1b1f35;
      color: #c8d0f5;
    }

    .output p {
      margin: 10px 0;
      font-size: 19px;
      font-weight: 600;
    }

    #score, #calculatedScore2 {
      font-size: 26px;
      font-weight: 800;
      color: #ffd860;
      text-shadow: 0 0 10px #ffd860aa;
    }

    #status {
      font-style: italic;
      color: #ffeaa7cc;
    }

    #elapsed, #timeRemaining, #nowTime2, #chosenTime2 {
      font-weight: 700;
    }

    .time-row {
      display: flex;
      gap: 14px;
    }

    .time-row input {
      flex: 1;
    }

    .time-row select {
      flex: 1;
    }

    hr {
      border-color: rgba(255 255 255 / 0.2);
      margin: 60px 0;
    }

    #calculator2 {
      background: rgba(255 255 255 / 0.1);
      padding: 34px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(255 216 96 / 0.3);
    }
  </style>
</head>
<body>

  <h1>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h1>

  <label>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Points)</label>
  <input type="number" id="points" min="0" />

  <label>‡∏ó‡∏∏‡∏Å‡πÜ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô) ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤</label>
  <div class="time-row">
    <input type="number" id="timeAmount" min="1" />
    <select id="timeUnit">
      <option value="seconds">‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
      <option value="minutes" selected>‡∏ô‡∏≤‡∏ó‡∏µ</option>
      <option value="hours">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</option>
      <option value="days">‡∏ß‡∏±‡∏ô</option>
    </select>
  </div>

  <label>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
  <input type="number" id="targetScore" placeholder="‡πÉ‡∏™‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" />

  <div style="display:flex; gap:14px; margin-top:24px;">
    <button onclick="start()">‡πÄ‡∏£‡∏¥‡πà‡∏°</button>
    <button onclick="pause()">‡∏û‡∏±‡∏Å</button>
    <button onclick="reset()">‡∏£‡∏µ‡πÄ‡∏ã‡∏ï</button>
  </div>

  <div class="output">
    <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <span id="status">‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°...</span></p>
    <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span></p>
    <p>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="elapsed">-</span></p>
    <p>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <span id="timeRemaining">-</span></p>
  </div>

  <hr />

  <div id="calculator2">
    <h1>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</h1>

    <label>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</label>
    <input type="number" id="points2" min="0" />

    <label>‡∏ó‡∏∏‡∏Å‡πÜ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô) ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏•‡∏≤</label>
    <div class="time-row">
      <input type="number" id="timeAmount2" min="1" />
      <select id="timeUnit2">
        <option value="seconds">‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
        <option value="minutes" selected>‡∏ô‡∏≤‡∏ó‡∏µ</option>
        <option value="hours">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</option>
        <option value="days">‡∏ß‡∏±‡∏ô</option>
      </select>
    </div>

    <label>‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢)</label>
    <input type="datetime-local" id="endTime2" />

    <button onclick="calculateScoreFromTime()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>

    <div class="output">
      <p>‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="nowTime2">-</span></p>
      <p>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: <span id="chosenTime2">-</span></p>
      <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="calculatedScore2">-</span></p>
      <!-- ‡∏•‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡∏≠‡∏≠‡∏Å -->
    </div>
  </div>

<script>
  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Local Storage ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏¥‡∏•‡∏î‡πå input, select
  function saveToStorage(id) {
    const elem = document.getElementById(id);
    if (!elem) return;
    elem.addEventListener('input', () => {
      localStorage.setItem(id, elem.value);
    });
    if (elem.tagName === "SELECT") {
      elem.addEventListener('change', () => {
        localStorage.setItem(id, elem.value);
      });
    }
  }

  // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏™‡πà‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏à‡∏≤‡∏Å LocalStorage (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
  function loadFromStorage(id, defaultValue = '') {
    const val = localStorage.getItem(id);
    const elem = document.getElementById(id);
    if (elem) {
      elem.value = val !== null ? val : defaultValue;
    }
  }

  // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å LocalStorage
  function loadAll() {
    loadFromStorage("points", "100");
    loadFromStorage("timeAmount", "10");
    loadFromStorage("timeUnit", "minutes");
    loadFromStorage("targetScore", "");

    loadFromStorage("points2", "100");
    loadFromStorage("timeAmount2", "10");
    loadFromStorage("timeUnit2", "minutes");
    loadFromStorage("endTime2", "");
  }

  // ‡πÄ‡∏ã‡πá‡∏ï event listener ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏•‡∏á Storage
  function setupSave() {
    ["points", "timeAmount", "timeUnit", "targetScore",
     "points2", "timeAmount2", "timeUnit2", "endTime2"].forEach(id => saveToStorage(id));
  }

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πá‡∏ô ms ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
  function toMilliseconds(amount, unit) {
    let ms = amount;
    if (unit === "seconds") ms *= 1000;
    else if (unit === "minutes") ms *= 60 * 1000;
    else if (unit === "hours") ms *= 3600 * 1000;
    else if (unit === "days") ms *= 86400 * 1000;
    return ms;
  }

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏ö‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
  function formatTime(ms) {
    if (ms < 0) ms = 0;
    const sec = Math.floor(ms / 1000);
    const days = Math.floor(sec / 86400);
    const hours = Math.floor((sec % 86400) / 3600);
    const minutes = Math.floor((sec % 3600) / 60);
    const seconds = sec % 60;
    return `${days} ‡∏ß‡∏±‡∏ô ${hours} ‡∏ä‡∏°. ${minutes} ‡∏ô‡∏≤‡∏ó‡∏µ ${seconds} ‡∏ß‡∏¥`;
  }

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏•‡∏Ç‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° 2 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
  function formatScore(score) {
    return Number.isInteger(score) ? score.toString() : score.toFixed(2);
  }

  // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
  let score = 0;
  let startTime = null;
  let pausedTime = 0;
  let pauseStart = null;
  let interval = null;
  let isRunning = false;

  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ
  function update() {
    if (!isRunning) return;

    const now = new Date();
    let elapsedMs = now - startTime - pausedTime;
    if (elapsedMs < 0) elapsedMs = 0;

    const points = parseFloat(document.getElementById("points").value) || 0;
    const timeAmount = parseFloat(document.getElementById("timeAmount").value) || 1;
    const unit = document.getElementById("timeUnit").value;
    const target = parseFloat(document.getElementById("targetScore").value);

    const unitMs = toMilliseconds(timeAmount, unit);

    const unitsPassed = Math.floor(elapsedMs / unitMs);
    score = unitsPassed * points;

    document.getElementById("score").textContent = formatScore(score);
    document.getElementById("elapsed").textContent = formatTime(elapsedMs);

    if (!isNaN(target) && target > 0 && points > 0) {
      const totalTimeMs = unitMs * (target / points);
      const remainingMs = totalTimeMs - elapsedMs;

      document.getElementById("timeRemaining").textContent = remainingMs > 0 ? formatTime(remainingMs) : "‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß";
      if (remainingMs <= 0) {
        document.getElementById("status").textContent = "‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡πâ‡∏ß üéâ";
        clearInterval(interval);
        isRunning = false;
        return;
      } else {
        document.getElementById("status").textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô...";
      }
    } else {
      document.getElementById("timeRemaining").textContent = "-";
      document.getElementById("status").textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô...";
    }
  }

  function start() {
    if (isRunning) return;
    if (!startTime) startTime = new Date();
    if (pauseStart) {
      pausedTime += new Date() - pauseStart;
      pauseStart = null;
    }
    isRunning = true;
    document.getElementById("status").textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô...";
    interval = setInterval(update, 1000);
  }

  function pause() {
    if (!isRunning) return;
    isRunning = false;
    pauseStart = new Date();
    clearInterval(interval);
    document.getElementById("status").textContent = "‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å...";
  }

  function reset() {
    isRunning = false;
    clearInterval(interval);
    score = 0;
    startTime = null;
    pausedTime = 0;
    pauseStart = null;
    document.getElementById("score").textContent = "0";
    document.getElementById("elapsed").textContent = "-";
    document.getElementById("timeRemaining").textContent = "-";
    document.getElementById("status").textContent = "‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°...";
  }

  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á 2) ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡∏î‡πâ‡∏ß‡∏¢
  function updateCalculator2() {
    const points2 = parseFloat(document.getElementById("points2").value) || 0;
    const timeAmount2 = parseFloat(document.getElementById("timeAmount2").value) || 1;
    const timeUnit2 = document.getElementById("timeUnit2").value;
    const endTimeStr = document.getElementById("endTime2").value;

    const now = new Date();
    document.getElementById("nowTime2").textContent = now.toLocaleString('th-TH');

    if (!endTimeStr) {
      document.getElementById("chosenTime2").textContent = "-";
      document.getElementById("calculatedScore2").textContent = "-";
      return;
    }

    const endTime = new Date(endTimeStr);
    document.getElementById("chosenTime2").textContent = endTime.toLocaleString('th-TH');

    const unitMs = toMilliseconds(timeAmount2, timeUnit2);

    const diffMs = endTime - now;
    if (diffMs < 0) {
      document.getElementById("calculatedScore2").textContent = "‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô";
      return;
    }

    const scoreCalc = (diffMs / unitMs) * points2;

    document.getElementById("calculatedScore2").textContent = formatScore(scoreCalc);
  }

  function calculateScoreFromTime() {
    updateCalculator2();
  }

  // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
  loadAll();
  setupSave();

  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á 2
  setInterval(updateCalculator2, 1000);
</script>

</body>
</html>
